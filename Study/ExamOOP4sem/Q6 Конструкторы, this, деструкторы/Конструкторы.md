# **Конструктор** 
— это специальный метод класса, который автоматически вызывается при создании экземпляра [[Классы и объекты#^fbd14b|класса]]

- Конструктор класса должен иметь то же имя, что и имя класса, в котором он находится.
- Класс может иметь любое количество конструкторов.
- Конструктор не может быть абстрактным или синхронизированным.
- Конструктор не имеет возвращаемого типа.

```cs
class Geeks{   
       // конструктор класса Geeks   
       public Geeks( ) { }   
}   
  
// Использование этого конструктора   
Geeks obj = new Geeks();
```
## **Типы конструкторов**

В C# есть разные типы конструкторов, каждый из которых служит разным целям. Вот наиболее часто используемые:

1. Конструктор по умолчанию
2. Параметризованный конструктор
3. Конструктор копирования
4. Закрытый конструктор
5. Статический конструктор

### *1. Конструктор по умолчанию*

***Конструктор без параметров*** называется конструктором по умолчанию. Конструктор по умолчанию инициализирует все экземпляры класса одинаковыми значениями. Конструктор по умолчанию инициализирует все числовые поля нулем, а все строковые и объектные поля — нулем внутри класса.

### *2. Параметризованный конструктор*

***Конструктор, имеющий хотя бы один параметр***, называется параметризованным конструктором. Он может инициализировать каждый экземпляр класса разными значениями.

### *3. Конструктор копирования*

***Конструктор копирования используется для создания нового объекта путем копирования значений из существующего объекта того же класса***. Полезно, когда вам нужно дублировать объект или создать новый объект на основе состояния другого.

### *4. Закрытый конструктор*

***Если конструктор создан с помощью спецификатора `private`***, он называется закрытым. Другие классы не могут быть производными от этого класса, а также невозможно создать экземпляр этого класса. Некоторые важные моменты, касающиеся темы, указаны ниже:

- Это реализация шаблона класса Singleton.
- Используйте закрытый конструктор, если у нас есть только статические члены.
- Использование закрытого конструктора предотвращает создание экземпляров этого класса.

> ***Примечание:*** Модификаторы доступа могут использоваться в объявлении конструктора для управления его доступом, т.е. какой другой класс может вызвать конструктор. Закрытый конструктор является одним из примеров.


```cs
// Private constructor
using System;

public class Geeks 
{
    // private Constructor
    private Geeks()
    {
        Console.WriteLine("from private constructor");
    }

    public static int count_geeks;

    public static int geeks_Count()
    {
        return ++count_geeks;
    }

    public static void Main()
    {
        // If you uncomment the following
        // statement, it will generate
        // an error because the constructor
        // is unaccessible:
        // Geeks s = new Geeks(); // Error

        Geeks.count_geeks = 99;

        // Accessing without any
        // instance of the class
        Geeks.geeks_Count();

        Console.WriteLine(Geeks.count_geeks);

        // Accessing without any
        // instance of the class
        Geeks.geeks_Count();

        Console.WriteLine(Geeks.count_geeks);
    }
}
```
### *5. Статический конструктор*
[[Статические компоненты класса#^d3adcf]]

# **Ключевое слово `this`** 
представляет ссылку на текущий экземпляр/объект класса.

# **Порядок вызова конструкторов**

В языке C# конструкторы вызываются в порядке [[Наследование|наследования]]. Это означает, что сначала отрабатывают конструкторы базовых классов, и только затем — конструкторы производных.

Также существуют *цепочки вызова конструкторов*.
В примере выше определены три конструктора. Все три конструктора выполняют однотипные действия - устанавливают значения полей name и age. Но этих повторяющихся действий могло быть больше. И мы можем не дублировать функциональность конструкторов, а просто обращаться из одного конструктора к другому также через ключевое слово this, передавая нужные значения для параметров:
```cs
class Person 
{
    public string name;
    public int age;
    public Person() : this("Неизвестно")    // первый конструктор
    { }
    public Person(string name) : this(name, 18) // второй конструктор
    { }
    public Person(string name, int age)     // третий конструктор
    {
        this.name = name;
        this.age = age;
    }
    public void Print() => Console.WriteLine($"Имя: {name}  Возраст: {age}");
    //new Person(); => name: Неизвестно, age: 18
}
```

